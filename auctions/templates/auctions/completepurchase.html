{% extends 'auctions/layout.html' %}

{% block title %}
Complete Purchase
{% endblock %}

{% block body %}
<div class="container">
    <h4 class="mb-3">Congratulations! You have successfully won the auction.</h4>
    <p>Thank you for participating in the auction. Please provide the following details to complete your purchase:</p>

    <form method="post" action="{% url 'complete_purchase' item.id %}" id="purchaseForm">
        {% csrf_token %}
        <div class="form-group">
            <label for="phone_number">Phone Number:</label>
            <input type="tel" class="form-control" id="phone_number" name="phone_number" required>
        </div>
        <div class="form-group">
            <label for="full_name">Full Name:</label>
            <input type="text" class="form-control" id="full_name" name="full_name" required>
        </div>
        <div class="form-group">
            <label for="address">Address:</label>
            <input type="text" class="form-control" id="address" name="address" required>
        </div>
        <div class="form-group">
            <label for="city">City:</label>
            <input type="text" class="form-control" id="city" name="city" required>
        </div>
        <div class="form-group">
            <label for="country">Country:</label>
            <input type="text" class="form-control" id="country" name="country" required>
        </div>
        <button type="submit" class="btn btn-primary" id="completePurchaseBtn">Complete Purchase</button>
    </form>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const completePurchaseBtn = document.getElementById("completePurchaseBtn");
    
        completePurchaseBtn.addEventListener("click", function () {
            // Show a confirmation pop-up
            if (confirm("Are you sure you want to complete the purchase?")) {
                // Submit the form
                document.getElementById("purchaseForm").submit();
            }
        });
    });
</script>
{% endblock %}
